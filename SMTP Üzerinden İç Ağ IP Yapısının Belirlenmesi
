SMTP Üzerinden İç Ağ IP Yapısının Belirlenmesi
SMTP (Simple Mail Transfer Protocol), bir e-posta göndermek için sunucu ile istemci arasındaki iletişim şeklini belirleyen protokoldür. SMTP, e-posta başlıkları (headers) adı verilen ve gönderen, alıcı, tarih, konu, mesaj kimliği gibi bilgiler içeren metin satırları ekler. Bu başlıklar, e-postanın hangi sunuculardan geçtiğini, hangi IP adreslerini kullandığını ve hangi hatalarla karşılaştığını gösterir.
SMTP üzerinden iç ağ IP yapısının belirlenmesi için aşağıdaki adımları izleyebilirsiniz:
1. Adım: Hedef sistemde olmadığını bildiğiniz bir e-posta adresine e-posta gönderin ve bize böyle bir e-posta olmadığına dair cevap dönmesini bekleyin. Bu cevap, hedef sistemin e-posta sunucusundan (mail server) gelecektir.
2. Adım: Beklediğiniz cevap posta kutunuza düştüğünde, gelen e-postanın başlık bilgilerini görebilmek için Gmail üzerinden "Orjinali göster" bağlantısını seçin.
3. Adım: Dönen e-posta için başlık bilgisi incelendiğinde, e-postanın 172.24.23.10 IP adresinden 121.14.21.23 IP adresine doğru yol aldığı görülür.  E-posta dönen e-posta olduğundan dolayı tersten yolu izlediğimizde, e-posta sunucunun iç ağa bakan arayüz IP adresi 172.24.23.10 şeklindedir. Bu da iç ağda 172.24.23.0/24 benzeri bir alt ağ (subnet) kullanıldığını bize göstermektedir. 121.14.21.0/24 alt ağı ise dışa bakan taraf için kullanılan alt ağdır.
Not: /24 alt ağ maskesi yalnızca alt ağı ifade etmek için kullanılmıştır. Firma bunu /25 veya /26 şeklinde de kullanmış olabilir.
4. Adım: E-posta başlık bilgilerinin daha görsel bir şekilde analiz edilmesi için MX Toolbox adresini kullanabilirsiniz. Bu site, e-posta başlıklarını yorumlayarak, e-postanın geçtiği sunucuları, IP adreslerini, zaman damgalarını (timestamps) ve hata kodlarını gösterir. Ayrıca, e-posta sunucularının güvenlik durumunu, DNS kayıtlarını, SPF, DKIM ve DMARC gibi doğrulama mekanizmalarını da kontrol eder.