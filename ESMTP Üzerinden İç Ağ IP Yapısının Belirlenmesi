ESMTP Üzerinden İç Ağ IP Yapısının Belirlenmesi
ESMTP, Extended Simple Mail Transfer Protocol, SMTP protokolünün genişletilmiş bir versiyonudur. ESMTP, SMTP protokolüne ek olarak, güvenlik, kimlik doğrulama, mesaj boyutu sınırlaması gibi özellikler sunar. ESMTP kullanarak iç ağ IP yapısının belirlenmesi için aşağıdaki adımları izleyebilirsiniz:
1. Adım: Hedef sistemde olmadığını bildiğiniz bir e-posta adresine e-posta gönderin. Örneğin, test@hedef.com gibi. E-postanızı gönderirken, ESMTP özelliklerini kullanmak için EHLO komutunu kullanın. Bu komut, sunucunun desteklediği ESMTP uzantılarını size bildirecektir. E-postanızı göndermek için bir e-posta istemcisi veya bir telnet uygulaması kullanabilirsiniz.
2. Adım: Hedef sistemden böyle bir e-posta adresi olmadığına dair bir cevap almayı bekleyin. Bu cevap, e-postanızın geri döndüğünü gösterir. Bu cevabı, e-posta istemcinizde veya telnet uygulamanızda görebilirsiniz.
3. Adım: Geri dönen e-postanın başlık bilgilerini inceleyin. Başlık bilgileri, e-postanın hangi sunuculardan geçtiğini, hangi IP adreslerini kullandığını, hangi tarih ve saatte gönderildiğini ve alındığını gösterir. Başlık bilgilerini, e-posta istemcinizde veya telnet uygulamanızda görebilirsiniz. Başlık bilgilerinde, Received: satırlarına dikkat edin. Bu satırlar, e-postanın geçtiği sunucuları ve IP adreslerini gösterir. Örneğin, aşağıdaki başlık bilgisi, e-postanın 192.168.1.10 IP adresinden 10.0.0.1 IP adresine doğru yol aldığını gösterir:
Received: from mail.hedef.com (192.168.1.10) by mail.bing.com (10.0.0.1) with Microsoft SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.1.2044.4; Mon, 22 Jan 2024 05:06:38 +0300
4. Adım: Geri dönen e-postanın başlık bilgilerini tersten izleyin. Yani, en son Received: satırından başlayarak, en ilk Received: satırına kadar gidin. Bu şekilde, e-postanın hedef sistemden nasıl geri döndüğünü takip edebilirsiniz. E-postanın geri döndüğü son sunucunun IP adresi, hedef sistemin iç ağa bakan arayüz IP adresidir. Bu IP adresi, iç ağın subnet maskesini belirlemenize yardımcı olabilir. Örneğin, eğer IP adresi 192.168.1.10 ise, iç ağda 192.168.1.0/24 benzeri bir subnet kullanıldığını söyleyebilirsiniz. E-postanın geri döndüğü ilk sunucunun IP adresi ise, hedef sistemin dış ağa bakan arayüz IP adresidir. Bu IP adresi, hedef sistemin internete çıkış IP adresini belirlemenize yardımcı olabilir. Örneğin, eğer IP adresi 10.0.0.1 ise, hedef sistemin internete çıkış IP adresi 10.0.0.1 şeklindedir.
5. Adım: E-postanın başlık bilgilerinin daha görsel bir şekilde analiz edilmesi için Mxtoolbox gibi bir web sitesi kullanabilirsiniz. Bu web sitesi, e-postanın başlık bilgilerini okumanıza ve yorumlamanıza yardımcı olur. Ayrıca, e-postanın geçtiği sunucuların konumlarını, isimlerini, sürümlerini, güvenlik durumlarını ve daha fazla bilgiyi gösterir.